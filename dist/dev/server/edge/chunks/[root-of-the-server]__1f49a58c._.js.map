{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/lib/supabase-config.ts"],"sourcesContent":["/**\r\n * Shared Supabase configuration utilities\r\n */\r\n\r\n// Fallback values for build time when environment variables are not available\r\nexport const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://placeholder.supabase.co';\r\nexport const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'placeholder-anon-key';\r\n\r\n// Check if configuration is valid\r\nexport const isSupabaseConfigured = \r\n  Boolean(process.env.NEXT_PUBLIC_SUPABASE_URL) && \r\n  Boolean(process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) &&\r\n  !supabaseUrl.includes('placeholder');\r\n\r\n// Check if we're in a browser environment\r\nexport const isBrowser = typeof window !== 'undefined';\r\n"],"names":[],"mappings":"AAAA;;CAEC,GAED,8EAA8E;;;;;;;;;;;AACvE,MAAM,cAAc,gFAAwC;AAC5D,MAAM,cAAc,wPAA6C;AAGjE,MAAM,uBACX,yFACA,iQACA,CAAC,YAAY,QAAQ,CAAC;AAGjB,MAAM,YAAY,kDAAkB"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/lib/supabase-server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\r\nimport { cookies } from \"next/headers\";\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport { supabaseUrl, supabaseKey, isSupabaseConfigured } from './supabase-config';\r\n\r\n// Warn only once during server initialization if Supabase is not configured\r\n// This is suppressed during build to avoid confusion in build logs\r\nif (!isSupabaseConfigured && typeof process !== 'undefined' && process.env.NODE_ENV === 'production') {\r\n    console.warn('⚠️ Supabase environment variables not configured in production. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.');\r\n}\r\n\r\n// Utility for Server Components and API Routes\r\nexport async function createClient() {\r\n    const cookieStore = await cookies();\r\n\r\n    return createServerClient(\r\n        supabaseUrl,\r\n        supabaseKey,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return cookieStore.getAll();\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    try {\r\n                        cookiesToSet.forEach(({ name, value, options }) =>\r\n                            cookieStore.set(name, value, options)\r\n                        );\r\n                    } catch {\r\n                        // The `setAll` method was called from a Server Component.\r\n                        // This can be ignored if you have middleware refreshing\r\n                        // user sessions.\r\n                    }\r\n                },\r\n            },\r\n        }\r\n    );\r\n}\r\n\r\n// Utility for Middleware - Edge Runtime Compatible\r\n// This implementation uses NextRequest/NextResponse cookies which work in Edge runtime\r\n// Unlike cookies() from next/headers, this approach is compatible with Cloudflare Pages\r\nexport function createMiddlewareClient(request: NextRequest, response: NextResponse) {\r\n    return createServerClient(\r\n        supabaseUrl,\r\n        supabaseKey,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return request.cookies.getAll();\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    cookiesToSet.forEach(({ name, value, options }) => {\r\n                        request.cookies.set(name, value);\r\n                        response.cookies.set(name, value, options);\r\n                    });\r\n                },\r\n            },\r\n        }\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;AAEA;;;;AAEA,4EAA4E;AAC5E,mEAAmE;AACnE;;AAKO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,sLAAO;IAEjC,OAAO,IAAA,uMAAkB,EACrB,uJAAW,EACX,uJAAW,EACX;QACI,SAAS;YACL;gBACI,OAAO,YAAY,MAAM;YAC7B;YACA,QAAO,YAAY;gBACf,IAAI;oBACA,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC1C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAErC,EAAE,OAAM;gBACJ,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACrB;YACJ;QACJ;IACJ;AAER;AAKO,SAAS,uBAAuB,OAAoB,EAAE,QAAsB;IAC/E,OAAO,IAAA,uMAAkB,EACrB,uJAAW,EACX,uJAAW,EACX;QACI,SAAS;YACL;gBACI,OAAO,QAAQ,OAAO,CAAC,MAAM;YACjC;YACA,QAAO,YAAY;gBACf,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;oBAC1C,QAAQ,OAAO,CAAC,GAAG,CAAC,MAAM;oBAC1B,SAAS,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;gBACtC;YACJ;QACJ;IACJ;AAER"}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { createMiddlewareClient } from \"@/lib/supabase-server\";\r\nimport { NextResponse } from \"next/server\";\r\nimport type { NextRequest } from \"next/server\";\r\n\r\n// CRITICAL: This middleware MUST run on Edge runtime for Cloudflare Pages compatibility\r\n// Cloudflare Pages does NOT support Node.js runtime for middleware\r\n// Even though Next.js 16 renamed this to \"proxy\", we keep using middleware.ts\r\n// because @opennextjs/cloudflare doesn't yet fully support the proxy.ts convention\r\nexport const runtime = 'edge';\r\n\r\nexport async function middleware(req: NextRequest) {\r\n    // Skip middleware for RSC (React Server Components) requests\r\n    // These are internal Next.js requests and should not be intercepted\r\n    if (req.nextUrl.searchParams.has('_rsc')) {\r\n        return NextResponse.next();\r\n    }\r\n\r\n    // Create an unmodified response first\r\n    const res = NextResponse.next({\r\n        request: {\r\n            headers: req.headers,\r\n        },\r\n    });\r\n\r\n    const supabase = createMiddlewareClient(req, res);\r\n\r\n    const {\r\n        data: { user },\r\n    } = await supabase.auth.getUser();\r\n\r\n    // Protected Routes\r\n    const protectedRoutes = ['/wardrobe', '/add-item', '/preferences', '/shop', '/onboarding'];\r\n    const isProtectedRoute = protectedRoutes.some(route => req.nextUrl.pathname.startsWith(route));\r\n\r\n    if (!user && isProtectedRoute) {\r\n        const redirectUrl = req.nextUrl.clone();\r\n        redirectUrl.pathname = '/auth/login';\r\n        redirectUrl.searchParams.set('redirectedFrom', req.nextUrl.pathname);\r\n        return NextResponse.redirect(redirectUrl);\r\n    }\r\n\r\n    return res;\r\n}\r\n\r\nexport const config = {\r\n    matcher: [\r\n        /*\r\n         * Match all request paths except:\r\n         * - _next/static (static files)\r\n         * - _next/image (image optimization files)\r\n         * - favicon.ico (favicon file)\r\n         */\r\n        '/((?!_next/static|_next/image|favicon.ico).*)',\r\n    ],\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAAA;;;AAOO,MAAM,UAAU;AAEhB,eAAe,WAAW,GAAgB;IAC7C,6DAA6D;IAC7D,oEAAoE;IACpE,IAAI,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS;QACtC,OAAO,gMAAY,CAAC,IAAI;IAC5B;IAEA,sCAAsC;IACtC,MAAM,MAAM,gMAAY,CAAC,IAAI,CAAC;QAC1B,SAAS;YACL,SAAS,IAAI,OAAO;QACxB;IACJ;IAEA,MAAM,WAAW,IAAA,kKAAsB,EAAC,KAAK;IAE7C,MAAM,EACF,MAAM,EAAE,IAAI,EAAE,EACjB,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,mBAAmB;IACnB,MAAM,kBAAkB;QAAC;QAAa;QAAa;QAAgB;QAAS;KAAc;IAC1F,MAAM,mBAAmB,gBAAgB,IAAI,CAAC,CAAA,QAAS,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IAEvF,IAAI,CAAC,QAAQ,kBAAkB;QAC3B,MAAM,cAAc,IAAI,OAAO,CAAC,KAAK;QACrC,YAAY,QAAQ,GAAG;QACvB,YAAY,YAAY,CAAC,GAAG,CAAC,kBAAkB,IAAI,OAAO,CAAC,QAAQ;QACnE,OAAO,gMAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,OAAO;AACX;AAEO,MAAM,SAAS;IAClB,SAAS;QACL;;;;;SAKC,GACD;KACH;AACL"}}]
}