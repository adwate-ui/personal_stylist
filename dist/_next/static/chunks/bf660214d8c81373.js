(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},23829,e=>{"use strict";var t=e.i(47167),s=e.i(43476),a=e.i(71645),r=e.i(33426),l=e.i(7984),i=e.i(66654),o=e.i(31278),c=e.i(83086),d=e.i(87316),n=e.i(75254);let x=(0,n.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),m=(0,n.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var h=e.i(56909),u=e.i(37727),b=e.i(74323),p=e.i(43531);let g=(0,n.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var f=e.i(46696),y=e.i(18566);function v(){let{profile:e,loading:n}=(0,r.useProfile)();(0,y.useRouter)();let[v,j]=(0,a.useState)("input"),[w,N]=(0,a.useState)(""),[k,S]=(0,a.useState)("Daytime"),[C,_]=(0,a.useState)([]),[z,M]=(0,a.useState)(null),[A,P]=(0,a.useState)(!1),[B,I]=(0,a.useState)([]),[W,L]=(0,a.useState)(!0),[T,D]=(0,a.useState)([]),[O,E]=(0,a.useState)(!1),[H,R]=(0,a.useState)(null),[U,X]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{let{data:{user:e}}=await l.supabase.auth.getUser();if(!e)return;let{data:t}=await l.supabase.from("wardrobe_items").select("*").eq("user_id",e.id);t&&_(t);let{data:s}=await l.supabase.from("outfits").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);s&&I(s),L(!1)})()},[]);let q=e=>{if(T.includes(e))D(t=>t.filter(t=>t!==e));else{if(T.length>=2)return void f.toast.error("You can select up to 2 anchor items.");D(t=>[...t,e])}},G=async()=>{if(!w)return void f.toast.error("Please enter an occasion");if(!e?.gemini_api_key&&!t.default.env.NEXT_PUBLIC_GEMINI_API_KEY)return void f.toast.error("API Key missing. Please go to Profile settings.");if(C.length<2)return void f.toast.error("Not enough items in wardrobe to generate an outfit.");j("generating");try{let t=await (0,i.generateOutfit)(C,w,k,e.location,e.gemini_api_key,T);M(t),j("result")}catch(e){console.error(e),f.toast.error("Failed to generate outfit. Please try again."),j("input")}},K=async()=>{P(!0);let{data:{user:e}}=await l.supabase.auth.getUser();if(!e||!z)return;let{error:t,data:s}=await l.supabase.from("outfits").insert({user_id:e.id,occasion:w,date:new Date().toISOString().split("T")[0],outfit_data:z,feedback:null}).select().single();P(!1),t?f.toast.error("Failed to save outfit"):(f.toast.success("Outfit saved to history!"),s&&I(e=>[s,...e]),j("input"),N(""),M(null),D([]))};return n?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)(o.Loader2,{className:"animate-spin text-primary"})}):(0,s.jsxs)("main",{className:"min-h-screen p-4 md:p-8 md:ml-64 pb-24 safe-area-pb bg-gradient-to-br from-black to-zinc-950 flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"max-w-7xl w-full mx-auto flex flex-col items-center",children:[(0,s.jsxs)("header",{className:"mb-12 text-center",children:[(0,s.jsxs)("h1",{className:"text-5xl font-serif font-bold text-white mb-3 flex items-center justify-center gap-3",children:[(0,s.jsx)(c.Sparkles,{className:"text-primary",size:40})," Outfit of the Day"]}),(0,s.jsx)("p",{className:"text-gray-400 text-lg",children:"AI-styled looks customized for you."})]}),"input"===v&&(0,s.jsxs)("div",{className:"w-full max-w-2xl bg-[#090909] border border-white/5 rounded-3xl p-8 md:p-12 animate-fade-in shadow-2xl backdrop-blur-sm relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -z-10 group-hover:bg-primary/10 transition-colors duration-1000"}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-400 uppercase tracking-wider mb-3 text-center",children:"Where are you going?"}),(0,s.jsxs)("div",{className:"relative max-w-md mx-auto",children:[(0,s.jsx)(d.Calendar,{className:"absolute left-4 top-4 text-gray-500",size:20}),(0,s.jsx)("input",{type:"text",placeholder:"e.g., Casual Office, Dinner Date...",value:w,onChange:e=>N(e.target.value),className:"w-full bg-black/40 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-white text-lg focus:border-primary focus:ring-1 outline-none transition-all placeholder:text-gray-600 text-center"})]})]}),(0,s.jsxs)("div",{className:"mb-10 text-center",children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-400 uppercase tracking-wider mb-3",children:"When is it?"}),(0,s.jsx)("div",{className:"inline-flex bg-black/40 p-1 rounded-2xl border border-white/5",children:["Daytime","Evening"].map(e=>(0,s.jsxs)("button",{onClick:()=>S(e),className:`py-3 px-8 rounded-xl transition-all flex items-center gap-2 font-medium ${k===e?"bg-primary text-black shadow-lg shadow-primary/20 scale-100":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[(0,s.jsx)(x,{size:16}),e]},e))})]}),(0,s.jsxs)("div",{className:"mb-10 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center items-center gap-2 mb-4",children:(0,s.jsx)("label",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Start with Specific Items"})}),T.length>0?(0,s.jsxs)("div",{className:"flex gap-3 flex-wrap justify-center",children:[T.map(e=>{let t=C.find(t=>t.id===e);return(0,s.jsxs)("div",{className:"bg-surface border border-white/10 rounded-xl pl-2 pr-3 py-2 flex items-center gap-3 text-sm text-white shadow-lg animate-scale-in",children:[(0,s.jsx)("img",{src:t?.image_url,className:"w-10 h-10 rounded-lg object-cover bg-gray-800",alt:""}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-bold text-xs truncate max-w-[100px]",children:t?.name||t?.category}),(0,s.jsx)("div",{className:"text-[10px] text-gray-500",children:t?.brand})]}),(0,s.jsx)("button",{onClick:()=>q(e),className:"text-gray-400 hover:text-red-400 ml-1",children:(0,s.jsx)(u.X,{size:16})})]},e)}),T.length<2&&(0,s.jsx)("button",{onClick:()=>E(!0),className:"w-14 h-14 rounded-xl border border-dashed border-white/20 flex items-center justify-center text-gray-500 hover:text-primary hover:border-primary transition-colors",children:(0,s.jsx)(b.PlusCircle,{size:24})})]}):(0,s.jsxs)("button",{onClick:()=>E(!0),className:"text-sm text-primary hover:text-primary/80 transition-colors flex items-center gap-2 mx-auto border border-primary/20 px-4 py-2 rounded-full hover:bg-primary/10",children:[(0,s.jsx)(b.PlusCircle,{size:16})," Build around Wardrobe Item"]})]}),(0,s.jsxs)("button",{onClick:G,disabled:!w,className:"w-full bg-gradient-to-r from-primary to-amber-200 text-black font-bold py-5 rounded-2xl text-xl hover:scale-[1.01] active:scale-[0.99] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 shadow-xl shadow-primary/20",children:[(0,s.jsx)(c.Sparkles,{size:24})," Generate Outfit"]})]}),"generating"===v&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-32 animate-fade-in w-full max-w-2xl bg-[#090909] border border-white/5 rounded-3xl",children:[(0,s.jsxs)("div",{className:"relative mb-8",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),(0,s.jsx)(c.Sparkles,{size:80,className:"text-primary relative z-10 animate-bounce"})]}),(0,s.jsx)("h2",{className:"text-3xl font-serif font-bold text-white mb-2",children:"Styling your look..."}),(0,s.jsx)("p",{className:"text-gray-400 text-lg",children:"Applying world-class styling rules..."})]}),"result"===v&&z&&(0,s.jsxs)("div",{className:"w-full animate-fade-in max-w-6xl",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-primary/10 via-transparent to-transparent p-6 mb-10 text-center border-l-4 border-primary/50",children:[(0,s.jsxs)("h3",{className:"text-primary font-bold mb-2 flex items-center justify-center gap-2 uppercase tracking-wide text-xs",children:[(0,s.jsx)(c.Sparkles,{size:14})," Stylist's Rationale"]}),(0,s.jsxs)("p",{className:"text-white/90 text-xl font-serif italic leading-relaxed max-w-3xl mx-auto",children:['"',z.reasoning,'"']})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-12",children:[{label:"Top",item:z.top},{label:"Bottom",item:z.bottom},{label:"Shoes",item:z.shoes},{label:"Layering",item:z.layering},{label:"Bag",item:z.bag},{label:"Watch",item:z.watch},{label:"Wallet",item:z.wallet},{label:"Headwear",item:z.headwear},{label:"Belt",item:z.belt},{label:"Sunglasses",item:z.sunglasses},{label:"Jewelry",item:z.jewelry},{label:"Scarf",item:z.scarf},{label:"Gloves",item:z.gloves},...(z.accessories||[]).map((e,t)=>({label:`Accessory ${t+1}`,item:e}))].filter(e=>e.item).map((e,t)=>(0,s.jsxs)("div",{onClick:()=>{var t,s;let a;return t=e.label,s=e.item,a=s?.category||t,void(X(C.filter(e=>e.id!==s?.id&&(e.category===a||e.sub_category===s?.sub_category||"Layering"===t&&["Jackets","Coats","Suits"].includes(e.category)||t.includes("Accessory")&&"Accessories"===e.category||"Watch"===t&&("Watches"===e.category||"Accessories"===e.category)||"Wallet"===t&&("Bags"===e.category||"Accessories"===e.category)))),R(t))},className:"group relative cursor-pointer",children:[(0,s.jsxs)("div",{className:"aspect-[3/4] bg-surface rounded-2xl overflow-hidden mb-3 relative border border-white/5 transition-all duration-300 group-hover:border-primary/50 group-hover:shadow-[0_0_30px_rgba(0,0,0,0.5)]",children:[(0,s.jsx)("img",{src:e.item.image_url,alt:e.item.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:(0,s.jsxs)("span",{className:"text-white font-medium flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full backdrop-blur-md border border-white/20",children:[(0,s.jsx)(m,{size:16})," Swap"]})}),(0,s.jsx)("div",{className:"absolute top-3 right-3 bg-black/50 backdrop-blur-md px-2 py-1 rounded text-[10px] text-gray-300 uppercase tracking-wider font-bold",children:e.label})]}),(0,s.jsxs)("div",{className:"text-center px-2",children:[(0,s.jsx)("div",{className:"text-xs text-primary font-bold uppercase tracking-wider mb-1",children:e.item.brand}),(0,s.jsx)("div",{className:"font-medium text-white truncate w-full",children:e.item.name||e.item.sub_category})]})]},t))}),(0,s.jsxs)("div",{className:"bg-[#090909] rounded-2xl p-8 border border-white/5 mb-10 max-w-4xl mx-auto",children:[(0,s.jsx)("h3",{className:"font-bold text-white mb-6 text-center uppercase tracking-widest text-sm",children:"Styling Tips"}),(0,s.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:(z.style_tips||[]).map((e,t)=>(0,s.jsxs)("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[(0,s.jsx)("span",{className:"w-8 h-8 rounded-full bg-primary/20 text-primary flex items-center justify-center shrink-0 text-sm font-bold mb-3",children:t+1}),(0,s.jsx)("p",{className:"text-sm text-gray-300 leading-relaxed",children:e})]},t))})]}),(0,s.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,s.jsxs)("button",{onClick:()=>j("input"),className:"px-8 py-4 rounded-xl border border-white/10 text-white hover:bg-white/5 flex items-center gap-2 font-bold transition-all hover:scale-105",children:[(0,s.jsx)(m,{size:20})," Discard & Try Again"]}),(0,s.jsxs)("button",{onClick:K,disabled:A,className:"px-10 py-4 rounded-xl bg-primary text-black font-bold hover:brightness-110 flex items-center gap-2 shadow-lg shadow-primary/20 transition-all hover:scale-105 hover:shadow-primary/40",children:[A?(0,s.jsx)(o.Loader2,{className:"animate-spin"}):(0,s.jsx)(h.Save,{size:20}),"Confirm & Save to History"]})]})]}),"input"===v&&(0,s.jsxs)("div",{className:"mt-20 w-full max-w-7xl border-t border-white/10 pt-10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,s.jsx)(g,{className:"text-primary",size:24}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Recent Looks"})]}),W?(0,s.jsx)("div",{className:"flex justify-center py-10",children:(0,s.jsx)(o.Loader2,{className:"animate-spin text-gray-500"})}):0===B.length?(0,s.jsx)("div",{className:"text-gray-500 italic",children:"No saved outfits yet. Create your first look above!"}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(e=>(0,s.jsxs)("div",{className:"bg-[#090909] border border-white/5 rounded-2xl overflow-hidden hover:border-primary/30 transition-all hover:-translate-y-1 group",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/5 flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-white",children:e.occasion}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:new Date(e.date).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"text-xs bg-white/5 px-2 py-1 rounded text-primary",children:[e.outfit_data.reasoning?.substring(0,30),"..."]})]}),(0,s.jsxs)("div",{className:"p-4 grid grid-cols-5 gap-1",children:[[e.outfit_data.top,e.outfit_data.bottom,e.outfit_data.shoes].filter(Boolean).map((e,t)=>(0,s.jsx)("div",{className:"aspect-[3/4] bg-surface rounded overflow-hidden",children:(0,s.jsx)("img",{src:e.image_url,alt:"",className:"w-full h-full object-cover"})},t)),(0,s.jsxs)("div",{className:"aspect-[3/4] bg-surface rounded overflow-hidden flex items-center justify-center text-xs text-gray-500 bg-white/5",children:["+",Object.keys(e.outfit_data).length-5]})]})]},e.id))})]})]}),O&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-md flex items-center justify-center p-4",onClick:()=>E(!1),children:(0,s.jsxs)("div",{className:"bg-[#121212] border border-white/10 rounded-2xl w-full max-w-4xl max-h-[85vh] flex flex-col shadow-2xl animate-scale-in",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-[#1a1a1a]",children:[(0,s.jsx)("h3",{className:"font-bold text-xl text-white",children:"Select Anchor Items"}),(0,s.jsx)("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-white p-2",children:(0,s.jsx)(u.X,{size:24})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4",children:C.map(e=>{let t=T.includes(e.id);return(0,s.jsxs)("button",{onClick:()=>q(e.id),className:`relative rounded-xl overflow-hidden aspect-[3/4] border-2 group transition-all duration-200 ${t?"border-primary ring-2 ring-primary/20 opacity-100 scale-95":"border-transparent opacity-80 hover:opacity-100 hover:scale-105"}`,children:[(0,s.jsx)("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}),t&&(0,s.jsx)("div",{className:"absolute inset-0 bg-primary/20 flex items-center justify-center backdrop-blur-[1px]",children:(0,s.jsx)("div",{className:"bg-primary text-black p-2 rounded-full shadow-lg",children:(0,s.jsx)(p.Check,{size:20,strokeWidth:3})})})]},e.id)})})}),(0,s.jsxs)("div",{className:"p-6 border-t border-white/10 flex justify-between items-center bg-[#1a1a1a]",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-400 font-medium",children:[T.length,"/2 selected"]}),(0,s.jsx)("button",{onClick:()=>E(!1),className:"bg-primary text-black px-8 py-3 rounded-xl font-bold hover:brightness-110 shadow-lg shadow-primary/20",children:"Confirm Selection"})]})]})}),H&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-md flex items-center justify-center p-4",onClick:()=>R(null),children:(0,s.jsxs)("div",{className:"bg-[#121212] border border-white/10 rounded-2xl w-full max-w-3xl max-h-[85vh] flex flex-col shadow-2xl animate-scale-in",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-[#1a1a1a]",children:[(0,s.jsxs)("h3",{className:"font-bold text-xl text-white",children:["Select ",H]}),(0,s.jsx)("button",{onClick:()=>R(null),className:"text-gray-400 hover:text-white p-2",children:(0,s.jsx)(u.X,{size:24})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:0===U.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 space-y-4",children:[(0,s.jsx)(c.Sparkles,{size:40,className:"opacity-20"}),(0,s.jsx)("p",{children:"No other compatible items found in your wardrobe."}),(0,s.jsx)("button",{onClick:()=>R(null),className:"text-primary hover:underline",children:"Close"})]}):(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:U.map(e=>(0,s.jsxs)("button",{onClick:()=>(e=>{if(!H)return;let t={...z};if("Top"===H)t.top=e;else if("Bottom"===H)t.bottom=e;else if("Shoes"===H)t.shoes=e;else if("Layering"===H)t.layering=e;else if("Bag"===H)t.bag=e;else if("Watch"===H)t.watch=e;else if("Wallet"===H)t.wallet=e;else if("Headwear"===H)t.headwear=e;else if("Belt"===H)t.belt=e;else if("Scarf"===H)t.scarf=e;else if("Gloves"===H)t.gloves=e;else if("Sunglasses"===H)t.sunglasses=e;else if("Jewelry"===H)t.jewelry=e;else if(H.startsWith("Accessory")){let s=parseInt(H.split(" ")[1])-1;t.accessories&&t.accessories[s]?t.accessories[s]=e:(t.accessories||(t.accessories=[]),t.accessories.push(e))}M(t),R(null),f.toast.success("Item updated!")})(e),className:"bg-[#090909] rounded-xl overflow-hidden border border-white/10 hover:border-primary text-left group transition-all hover:-translate-y-1 hover:shadow-xl",children:[(0,s.jsxs)("div",{className:"aspect-[3/4] w-full bg-gray-800 relative",children:[(0,s.jsx)("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-primary/10 transition-colors"})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("p",{className:"font-bold text-sm truncate text-white",children:e.name||e.sub_category}),(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e.brand})]})]},e.id))})})]})})]})}e.s(["default",()=>v],23829)}]);