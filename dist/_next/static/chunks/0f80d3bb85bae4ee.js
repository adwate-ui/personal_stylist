(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63209,e=>{"use strict";let s=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],63209)},31278,78416,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function t(e){let s=e.toLowerCase();return s.includes("shirt")||s.includes("top")||s.includes("blouse")?"ðŸ‘”":s.includes("pant")||s.includes("jean")||s.includes("trouser")?"ðŸ‘–":s.includes("dress")||s.includes("gown")?"ðŸ‘—":s.includes("shoe")||s.includes("sneaker")||s.includes("boot")?"ðŸ‘Ÿ":s.includes("jacket")||s.includes("coat")||s.includes("blazer")?"ðŸ§¥":s.includes("bag")||s.includes("purse")||s.includes("clutch")?"ðŸ‘œ":s.includes("watch")||s.includes("accessory")?"âŒš":s.includes("hat")||s.includes("cap")?"ðŸ§¢":s.includes("scarf")?"ðŸ§£":s.includes("glasses")||s.includes("sunglasses")?"ðŸ•¶ï¸":"ðŸ‘•"}async function a(e,s,t){try{let a=[e,s,t].filter(Boolean).join(" ");try{let e=await fetch("https://link-scraper.adwate.workers.dev/search-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(e.ok){let s=await e.json();if(s.url&&s.url.startsWith("http"))return{url:s.url,imageUrl:s.imageUrl,title:s.title,price:s.price,brand:s.brand}}}catch(e){console.warn("Worker search failed, using fallback",e)}return{url:`https://www.google.com/search?q=${encodeURIComponent(a)}&tbm=shop`,imageUrl:void 0}}catch(e){return console.error("Error fetching product data:",e),{url:"#"}}}e.s(["Loader2",()=>s],31278),e.s(["getFirstSearchResultUrl",()=>a,"getProductImagePlaceholder",()=>t],78416)},50965,e=>{"use strict";let s=(0,e.i(75254).default)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);e.s(["ShoppingBag",()=>s],50965)},6936,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(46696),i=e.i(83086),l=e.i(31278),n=e.i(63209),c=e.i(75254);let o=(0,c.default)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),d=(0,c.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),m=(0,c.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var h=e.i(50965);let x=(0,c.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var u=e.i(7984),p=e.i(33426),g=e.i(78416);let b={India:{symbol:"â‚¹",code:"INR"},"United States":{symbol:"$",code:"USD"},"United Kingdom":{symbol:"Â£",code:"GBP"},Europe:{symbol:"â‚¬",code:"EUR"},UAE:{symbol:"AED",code:"AED"},Singapore:{symbol:"S$",code:"SGD"},Australia:{symbol:"A$",code:"AUD"},Canada:{symbol:"C$",code:"CAD"},Japan:{symbol:"Â¥",code:"JPY"},China:{symbol:"Â¥",code:"CNY"}},y={luxury:["Gucci","Prada","Louis Vuitton","HermÃ¨s","Chanel","Dior","Versace","Balenciaga","Saint Laurent","Givenchy","Burberry","Fendi","Valentino","Tom Ford","Bottega Veneta","Celine","Loewe","Alexander McQueen","Manish Malhotra","Sabyasachi","Tarun Tahiliani"],contemporary:["Massimo Dutti","COS","Sandro","Maje","Reiss","& Other Stories","Everlane","Theory","Vince","Ted Baker","AllSaints","Whistles","A.P.C.","Acne Studios","Equipment","Rag & Bone","FabIndia","Nicobar","Good Earth","Anita Dongre"],"high-street":["Zara","H&M","Mango","Uniqlo","Gap","Marks & Spencer","Banana Republic","J.Crew","Topshop","Urban Outfitters","Westside","AND","Only","Vero Moda","Max Fashion"],budget:["Primark","Forever 21","Old Navy","Target","Walmart","Shein","Boohoo","ASOS","Bershka","Pull&Bear","Reliance Trends","Pantaloons","Lifestyle"],unknown:[]};function f(e){if(!e)return"unknown";let s=e.toLowerCase().trim();for(let[e,t]of Object.entries(y))if(t.some(e=>e.toLowerCase()===s||s.includes(e.toLowerCase())))return e;return"unknown"}let j=()=>(0,s.jsx)(s.Fragment,{children:[...Array(8)].map((e,t)=>(0,s.jsxs)("div",{className:"card relative animate-pulse",children:[(0,s.jsx)("div",{className:"aspect-[3/4] bg-gray-800/50 rounded-t-xl"}),(0,s.jsx)("div",{className:"p-4 space-y-3",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"h-6 w-24 bg-gray-800/50 rounded"}),(0,s.jsx)("div",{className:"h-5 w-12 bg-gray-800/50 rounded"})]})})]},t))}),w={Shirts:["shirt","blouse","top","polo"],Suits:["suit","blazer","sport coat"],Trousers:["trouser","pant","slacks","chino"],Jeans:["jean","denim"],Jackets:["jacket","coat","outerwear","parka","bomber"],Coats:["coat","overcoat","trench"],Shoes:["shoe","sneaker","boot","loafer","oxford","heel","flat","sandal"],Accessories:["accessory","pocket square","scarf","hat","cap","glove"],Ties:["tie","bow tie","necktie"],Belts:["belt"],Watches:["watch","timepiece"],Socks:["sock","hosiery"],Dresses:["dress","gown"],Skirts:["skirt"],Activewear:["activewear","sportswear","athletic","gym","workout"]},v=(e,s)=>{let t=`${e||""} ${s||""} `.toLowerCase();for(let e of["Watches","Socks","Ties","Belts","Suits","Jeans","Trousers","Shirts","Dresses","Skirts","Coats","Jackets","Shoes","Accessories","Activewear"]){let s=w[e];if(s&&s.some(e=>t.includes(e)))return e}return"Other"},N=({item:e})=>{var a;let r,i=f(e.brand||""),l=(a=e.brand||"","unknown"===(r=i||f(a))?["Zara","H&M","Uniqlo","Mango"]:y[r].filter(e=>e.toLowerCase()!==a.toLowerCase()).slice(0,5)),n=Array.isArray(l)?l:[],[c,o]=(0,t.useState)(new Map);return(0,t.useEffect)(()=>{(async()=>{let s=new Map;for(let t of n.slice(0,6))try{let a=await (0,g.getFirstSearchResultUrl)(t,e.sub_category||e.category,"");s.set(t,a)}catch(e){console.error(`Failed to fetch image for ${t}:`,e)}o(s)})()},[e.id]),(0,s.jsx)(s.Fragment,{children:n.slice(0,6).map((t,a)=>{let r=c.get(t);return(0,s.jsxs)("button",{onClick:()=>{r?.url&&"#"!==r.url&&window.open(r.url,"_blank")},className:"p-3 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 hover:border-primary/50 transition-all group text-left w-full overflow-hidden",children:[r?.imageUrl&&(0,s.jsx)("div",{className:"w-full h-24 mb-2 bg-gray-800 rounded overflow-hidden",children:(0,s.jsx)("img",{src:r.imageUrl,alt:t,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("span",{className:"font-medium text-sm truncate pr-2",children:t}),(0,s.jsx)(x,{size:14,className:"text-gray-400 group-hover:text-primary flex-shrink-0"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-400 capitalize truncate",children:e.sub_category||e.category})]},a)})})};function k(){let e,c,y,w,[k,S]=(0,t.useState)([]),[_,C]=(0,t.useState)(!0),[A,M]=(0,t.useState)(null),[z,T]=(0,t.useState)(1),[F,U]=(0,t.useState)(!1),[B,L]=(0,t.useState)(!1),[P,R]=(0,t.useState)("grid"),[D,$]=(0,t.useState)("4x4"),[J,E]=(0,t.useState)(!1),[O,q]=(0,t.useState)(null),[V,G]=(0,t.useState)(!1),[I,W]=(0,t.useState)(!1),[H,K]=(0,t.useState)([]),{profile:Y}=(0,p.useProfile)();(0,a.useRouter)(),(0,t.useEffect)(()=>{let e=localStorage.getItem("wardrobe_view_mode"),s=localStorage.getItem("wardrobe_grid_size");("grid"===e||"list"===e)&&R(e),("4x4"===s||"5x5"===s||"6x6"===s)&&$(s)},[]);let Z=e=>{R(e),localStorage.setItem("wardrobe_view_mode",e)},Q=async(e=1,s=!1)=>{s?L(!0):(C(!0),M(null));try{let{data:{user:t}}=await u.supabase.auth.getUser();if(!t){if(s)return void U(!1);S([]),C(!1);return}let a=(e-1)*20,r=a+20-1,{data:i,error:l,count:n}=await u.supabase.from("wardrobe_items").select("*",{count:"exact"}).eq("user_id",t.id).order("created_at",{ascending:!1}).range(a,r);if(l)throw Error(l.message);let c=i||[];s?S(e=>[...e,...c]):(S(c),c.length),U((n||0)>r+1),T(e)}catch(e){console.error(e),s?r.toast.error("Failed to load more items",{description:e.message}):M(e.message||"Failed to load wardrobe items")}finally{C(!1),L(!1)}};(0,t.useEffect)(()=>{Q()},[]);let X=async e=>{if(confirm("Are you sure you want to delete this item?")){G(!0);try{let{error:s}=await u.supabase.from("wardrobe_items").delete().eq("id",e);if(s)throw s;S(s=>s.filter(s=>s.id!==e)),q(null),r.toast.success("Item deleted")}catch(e){console.error(e),r.toast.error("Failed to delete item",{description:e.message})}finally{G(!1)}}},ee=async()=>{if(confirm("Recalculate scores for all items? This will update all product ratings based on your current Style DNA and wardrobe.")){W(!0);try{let e=await fetch("/api/wardrobe/recalculate-scores",{method:"POST"});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to recalculate scores")}let s=await e.json();r.toast.success(`Recalculated ${s.count} items`,{description:"All product scores have been updated"}),await Q()}catch(e){console.error(e),r.toast.error("Failed to recalculate scores",{description:e.message})}finally{W(!1)}}},es=k.reduce((e,s)=>{let t=v(s.category,s.sub_category);return e[t]||(e[t]=[]),e[t].push(s),e},{}),et=Object.keys(es).sort();return(0,s.jsxs)("div",{className:"min-h-screen p-8 pb-20 relative",children:[O&&(0,s.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:()=>q(null),children:(0,s.jsxs)("div",{className:"bg-[#121212] border border-white/10 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto flex flex-col md:flex-row shadow-2xl relative",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),q(null)},className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-white/10 rounded-full text-gray-400 hover:text-white transition-colors z-10",children:(0,s.jsx)(m,{size:24})}),(0,s.jsx)("div",{className:"w-full md:w-1/2 bg-[#050505] relative min-h-[300px] md:min-h-full",children:(0,s.jsx)("img",{src:O.image_url||"/placeholder-garment.jpg",alt:O.name,className:"w-full h-full object-contain"})}),(0,s.jsxs)("div",{className:"w-full md:w-1/2 p-8 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[O.brand&&(0,s.jsx)("span",{className:"px-3 py-1 bg-white/5 border border-white/10 rounded-full text-xs font-medium tracking-wider text-gray-400 uppercase",children:O.brand}),(0,s.jsx)("span",{className:"px-3 py-1 bg-white/5 border border-white/10 rounded-full text-xs font-medium tracking-wider text-gray-400 uppercase",children:O.category})]}),(0,s.jsx)("h2",{className:"text-3xl font-serif font-bold text-white mb-2",children:O.name}),O.style_score&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"flex bg-white/5 rounded-lg p-1",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(i.Sparkles,{size:14,className:t<Math.round((O.style_score||0)/2)?"text-[#d4af37]":"text-gray-700"},t))}),(0,s.jsxs)("span",{className:"text-[#d4af37] font-bold",children:[O.style_score,"/10 Match"]})]}),(0,s.jsxs)("div",{className:"space-y-3 pb-4 border-b border-white/10",children:[(O.price||O.ai_analysis?.price||O.ai_analysis?.price_estimate)&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"Price:"}),(0,s.jsx)("div",{className:"text-xl font-bold text-primary",children:O.price?Y?.location?function(e,s){let t=function(e){if(!e)return{symbol:"$",code:"USD"};if(b[e])return b[e];for(let[s,t]of Object.entries(b))if(e.includes(s))return t;return{symbol:"$",code:"USD"}}(s);if("string"==typeof e)if(e.includes("$")||e.includes("â‚¹")||e.includes("Â£")||e.includes("â‚¬")){let s=parseFloat(e.replace(/[^0-9.]/g,""));if(isNaN(s))return e;e=s}else{let s=parseFloat(e.replace(/[^0-9.]/g,""));if(isNaN(s))return e;e=s}return`${t.symbol}${e.toLocaleString()}`}(O.price,Y.location):`Rs. ${O.price}`:O.ai_analysis?.price||O.ai_analysis?.price_estimate})]}),(O.link||O.brand||O.name)&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"Product Link:"}),O.link?(0,s.jsxs)("a",{href:O.link,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80 text-sm underline underline-offset-2 flex items-center gap-1",children:["View Product ",(0,s.jsx)(x,{size:12})]}):(0,s.jsxs)("button",{onClick:async()=>{let e=O.color||O.ai_analysis?.primary_color,s=await (0,g.getFirstSearchResultUrl)(O.brand||"",O.name||O.sub_category||"",e);window.open(s.url,"_blank")},className:"text-primary hover:text-primary/80 text-sm underline underline-offset-2 flex items-center gap-1",children:["Find Product ",(0,s.jsx)(x,{size:12})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-white uppercase tracking-wider mb-2",children:"Analysis"}),(0,s.jsx)("p",{className:"text-gray-400 leading-relaxed text-sm",children:O.ai_analysis?.description||O.description||"No specific analysis available."})]}),O.ai_analysis?.styling_tips&&O.ai_analysis.styling_tips.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-bold text-white uppercase tracking-wider mb-2",children:"Styling Tips"}),(0,s.jsx)("ul",{className:"space-y-2",children:O.ai_analysis.styling_tips.map((e,t)=>(0,s.jsxs)("li",{className:"flex gap-3 text-sm text-gray-300",children:[(0,s.jsx)("span",{className:"text-primary mt-1",children:"â€¢"}),(0,s.jsx)("span",{children:e})]},t))})]}),(e={Shirts:["Trousers","Jeans","Suits","Ties","Belts"],Suits:["Shirts","Ties","Belts","Shoes"],Trousers:["Shirts","Jackets","Belts","Shoes"],Jeans:["Shirts","Jackets","Shoes"],Jackets:["Shirts","Trousers","Jeans"],Shoes:["Trousers","Jeans","Suits"],Ties:["Shirts","Suits","Jackets"],Belts:["Trousers","Jeans","Suits"],Dresses:["Shoes","Accessories","Jackets"],Skirts:["Shirts","Jackets","Shoes"]},c=v(O.category,O.sub_category),0===(y=k.filter(s=>{if(s.id===O.id)return!1;let t=v(s.category,s.sub_category);return(e[c]||[]).includes(t)}).slice(0,6)).length?null:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-white uppercase tracking-wider mb-3 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-primary",children:"âœ¨"})," Pairs Well With"]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:y.map(e=>(0,s.jsx)("div",{onClick:()=>q(e),className:"bg-white/5 border border-white/10 rounded-lg p-2 hover:bg-white/10 hover:border-primary/30 transition-all cursor-pointer",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-12 h-16 bg-gray-800 rounded overflow-hidden flex-shrink-0",children:(0,s.jsx)("img",{src:e.image_url||"/placeholder-garment.jpg",alt:e.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-white truncate",children:e.name||e.sub_category}),(0,s.jsx)("div",{className:"text-xs text-gray-400 truncate",children:e.brand||e.category})]})]})},e.id))})]}))]}),(0,s.jsxs)("div",{className:"pb-4 border-b border-white/10",children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[(0,s.jsx)(h.ShoppingBag,{size:16,className:"text-primary"}),"Similar Items from ",f(O.brand||"")," Brands"]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:(0,s.jsx)(N,{item:O})})]}),(O.generated_by_model||O.ai_analysis?.generated_by_model)&&(0,s.jsx)("div",{className:"pt-4 border-t border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Analysis by:"}),(0,s.jsx)("span",{className:"text-primary font-medium",children:"gemini-3-pro-preview"===(w=O.generated_by_model||O.ai_analysis?.generated_by_model)?"Gemini 3 Pro":"gemini-2.5-pro"===w?"Gemini 2.5 Pro":"gemini-3-flash-preview"===w?"Gemini 3 Flash":"gemini-2.5-flash"===w?"Gemini 2.5 Flash":w})]}),(0,s.jsx)("button",{onClick:async()=>{r.toast.info("Regeneration feature coming soon!")},className:"text-xs px-3 py-1 bg-primary/10 hover:bg-primary/20 text-primary border border-primary/30 rounded-full transition-colors",children:"Regenerate â†»"})]})}),(0,s.jsxs)("div",{className:"pt-8 border-t border-white/10 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Added ",new Date(O.created_at).toLocaleDateString()]}),(0,s.jsx)("button",{onClick:()=>X(O.id),disabled:V,className:"px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 border border-red-500/20 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:V?(0,s.jsx)(l.Loader2,{className:"animate-spin",size:16}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M3 6h18"}),(0,s.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,s.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})," Delete Item"]})})]})]})]})}),(0,s.jsxs)("header",{className:"mb-12 flex justify-between items-center flex-wrap gap-4",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"Wardrobe"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-wrap relative",children:[(0,s.jsxs)("div",{className:"inline-flex bg-white/5 rounded-lg p-1 border border-white/10",children:[(0,s.jsxs)("button",{onClick:()=>{Z("grid"),E(!J)},className:`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 flex items-center gap-2 ${"grid"===P?"bg-primary text-black shadow-lg":"text-gray-400 hover:text-white"}`,children:[(0,s.jsx)(o,{size:16}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Grid"})]}),(0,s.jsxs)("button",{onClick:()=>{Z("list"),E(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 flex items-center gap-2 ${"list"===P?"bg-primary text-black shadow-lg":"text-gray-400 hover:text-white"}`,children:[(0,s.jsx)(d,{size:16}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"List"})]})]}),"grid"===P&&J&&(0,s.jsx)("div",{className:"absolute top-full left-0 mt-2 bg-gray-900 rounded-lg p-2 border border-white/20 shadow-xl z-50",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1 min-w-[120px]",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Grid Size"}),["4x4","5x5","6x6"].map(e=>(0,s.jsx)("button",{onClick:()=>{$(e),localStorage.setItem("wardrobe_grid_size",e),E(!1)},className:`px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 text-left ${D===e?"bg-primary text-black":"text-gray-300 hover:bg-white/10"}`,children:e},e))]})}),(0,s.jsx)("button",{onClick:ee,disabled:I||0===k.length,className:"px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Recalculate all product scores with current Style DNA",children:I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Loader2,{className:"animate-spin",size:16}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Recalculating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Sparkles,{size:16}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Recalculate Scores"})]})})]})]}),A?(0,s.jsxs)("div",{className:"glass p-8 rounded-xl text-center max-w-md mx-auto mt-20 border border-red-500/30",children:[(0,s.jsx)(n.AlertCircle,{className:"mx-auto mb-4 text-red-400",size:48}),(0,s.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Unavailable"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:A}),(0,s.jsx)("button",{onClick:()=>Q(),className:"btn bg-red-500/20 hover:bg-red-500/30 text-red-200 border-none",children:"Try Again"})]}):(0,s.jsxs)(s.Fragment,{children:[0!==k.length||_?(0,s.jsxs)("div",{className:"space-y-12",children:[et.map(e=>(0,s.jsxs)("div",{className:"animate-fade-in",children:[(0,s.jsxs)("h2",{className:"text-2xl font-serif font-bold mb-6 border-b border-white/10 pb-2 flex items-center gap-2",children:[e," ",(0,s.jsx)("span",{className:"text-xs font-sans font-normal text-gray-500 bg-white/5 px-2 py-1 rounded-full",children:es[e].length})]}),(0,s.jsx)("div",{className:"grid"===P?`grid-gallery-${D}`:"space-y-4",children:es[e].map(e=>"grid"===P?(0,s.jsxs)("div",{className:"card group relative cursor-pointer active:scale-95 transition-transform",onClick:()=>q(e),children:[(0,s.jsx)("div",{className:"aspect-[3/4] overflow-hidden bg-gray-800",children:(0,s.jsx)("img",{src:e.image_url||"/placeholder-garment.jpg",alt:e.name||e.sub_category,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg capitalize truncate pr-2",children:e.name||e.sub_category||e.category}),e.style_score&&(0,s.jsxs)("span",{className:"bg-white/10 text-xs px-2 py-1 rounded whitespace-nowrap",children:[e.style_score,"/10"]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mb-3 line-clamp-2",children:e.description||e.ai_analysis?.description||"No description available"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.brand&&(0,s.jsx)("span",{className:"text-xs border border-white/20 px-2 py-1 rounded-full capitalize bg-white/5",children:e.brand}),e.season&&(0,s.jsx)("span",{className:"text-xs border border-white/20 px-2 py-1 rounded-full capitalize",children:e.season})]})]}),(0,s.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center p-6 text-center backdrop-blur-sm pointer-events-none",children:[(0,s.jsx)(i.Sparkles,{size:24,className:"text-[#d4af37] mb-2"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:e.ai_analysis?.styling_tips?.[0]||e.critique||"View details for styling tips"})]})]},e.id):(0,s.jsxs)("div",{className:"card p-4 flex gap-6 items-center hover:bg-white/5 transition-colors group cursor-pointer",onClick:()=>q(e),children:[(0,s.jsx)("div",{className:"w-24 h-32 shrink-0 bg-gray-800 rounded-lg overflow-hidden",children:(0,s.jsx)("img",{src:e.image_url||"/placeholder-garment.jpg",alt:e.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,s.jsx)("h3",{className:"font-bold text-xl capitalize truncate",children:e.name||e.sub_category||e.category}),e.style_score&&(0,s.jsxs)("span",{className:`text - sm font - bold px - 3 py - 1 rounded - full ${e.style_score>80?"bg-green-500/20 text-green-400":"bg-white/10"} `,children:[e.style_score,"/10"]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mb-3 line-clamp-1",children:e.description||e.ai_analysis?.description}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.brand&&(0,s.jsx)("span",{className:"badge badge-outline",children:e.brand}),e.category&&(0,s.jsx)("span",{className:"badge badge-outline",children:e.category}),e.color&&(0,s.jsx)("span",{className:"badge badge-outline",children:e.color})]})]})]},e.id))})]},e)),_&&(0,s.jsx)(j,{})]}):(0,s.jsxs)("div",{className:"text-center py-20 opacity-30",children:[(0,s.jsx)(i.Sparkles,{size:64,className:"mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-xl",children:"Your wardrobe is empty. Start adding items!"})]}),F&&!_&&(0,s.jsx)("div",{className:"flex justify-center mt-12",children:(0,s.jsx)("button",{onClick:()=>{Q(z+1,!0)},disabled:B,className:"btn btn-secondary min-w-[150px]",children:B?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Loader2,{className:"animate-spin mr-2",size:18}),"Loading..."]}):"Load More"})})]})]})}e.s(["default",()=>k],6936)}]);