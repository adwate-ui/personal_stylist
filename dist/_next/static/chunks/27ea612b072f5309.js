(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69074,e=>{"use strict";let a=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>a],69074)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},13278,e=>{"use strict";var a=e.i(43476),r=e.i(71645),t=e.i(18566),s=e.i(7984),i=e.i(27599),l=e.i(75254);let o=(0,l.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var d=e.i(56909);let c=(0,l.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),n=(0,l.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),m=(0,l.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),x=(0,l.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),p=(0,l.default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var u=e.i(69074),y=e.i(57688),h=e.i(63178),g=e.i(33426),f=e.i(46696);function b(){let e=(0,t.useRouter)(),{profile:l,user:b,saveProfile:v}=(0,g.useProfile)(),{theme:j,setTheme:k}=(0,h.useTheme)(),[N,w]=(0,r.useState)(""),[_,I]=(0,r.useState)(""),[A,P]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[M,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(z(!0),l.gemini_api_key)w(l.gemini_api_key),P(!1);else{let e=localStorage.getItem("gemini_api_key");e?(w(e),P(!1)):P(!0)}if(l.image_extractor_api_key)I(l.image_extractor_api_key),C(!1);else{let e=localStorage.getItem("image_extractor_api_key");e?(I(e),C(!1)):C(!0)}},[l.gemini_api_key,l.image_extractor_api_key]);let E=async()=>{N.trim()?(localStorage.setItem("gemini_api_key",N),await v({gemini_api_key:N}),P(!1),f.toast.success("API Key saved to your account and device.")):f.toast.error("Please enter a valid API key")},K=async()=>{_.trim()?(localStorage.setItem("image_extractor_api_key",_),await v({image_extractor_api_key:_}),C(!1),f.toast.success("Image Extractor Key saved.")):f.toast.error("Please enter a valid Image Extractor API key")},T=async()=>{if(window.confirm("Are you sure? This action is irreversible. All your data (wardrobe, profile) will be deleted.")){await s.supabase.rpc("delete_user");try{let{data:{user:a}}=await s.supabase.auth.getUser();a&&(await s.supabase.from("profiles").delete().eq("id",a.id),await s.supabase.auth.signOut(),e.push("/auth/login"))}catch(e){console.error("Delete error",e),f.toast.error("Could not complete account deletion via static request. Please contact support.")}}};return M?(0,a.jsxs)("div",{className:"min-h-screen p-8 lg:p-12 animate-fade-in bg-background text-foreground",children:[(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-12",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b border-border/50 pb-8",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-primary/20 flex items-center justify-center font-serif text-2xl text-primary font-bold border border-primary/20 overflow-hidden relative",children:l?.avatar_url?(0,a.jsx)(y.default,{src:l.avatar_url,alt:l.name||"Profile",fill:!0,className:"object-cover"}):l?.name?.[0]||"U"}),(0,a.jsxs)("label",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer rounded-full backdrop-blur-sm",children:[(0,a.jsx)(u.Upload,{size:20,className:"text-white"}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:async e=>{if(!e.target.files?.[0])return;if(!i.isSupabaseConfigured)return void f.toast.error("Storage not configured for uploads");let a=e.target.files[0],r=f.toast.loading("Uploading avatar...");try{let e=a.name.split(".").pop(),t=`${b?.id||"unknown"}/${Date.now()}.${e}`,{error:i}=await s.supabase.storage.from("avatars").upload(t,a);if(i)throw i;let{data:{publicUrl:l}}=s.supabase.storage.from("avatars").getPublicUrl(t);await v({avatar_url:l}),f.toast.success("Avatar updated!",{id:r})}catch(e){console.error(e),f.toast.error("Failed to upload avatar",{id:r})}}})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-serif font-bold",children:l?.name||"Style Icon"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:b?.email||"User Profile"})]})]}),!N&&(0,a.jsx)("div",{className:"bg-primary/10 border border-primary/30 rounded-xl p-6 space-y-3",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(c,{size:24,className:"text-primary flex-shrink-0 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-primary",children:"âš ï¸ Action Required: Set Your Gemini API Key"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"To use AI-powered wardrobe analysis and shopping recommendations, you need to provide your own Google Gemini API key. This key is securely stored in your profile and used exclusively for your requests."}),(0,a.jsx)("p",{className:"text-sm text-primary/80 mt-2 font-medium",children:'ðŸ‘‡ Scroll down to "AI Configuration" section to add your key.'})]})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-primary mb-2",children:[(0,a.jsx)(p,{size:24}),(0,a.jsx)("span",{className:"uppercase tracking-widest text-xs font-bold",children:"Appearance"})]}),(0,a.jsxs)("div",{className:"card glass p-8 rounded-xl border border-border/50 space-y-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Theme Preference"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select your interface mode."}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("button",{onClick:()=>k("light"),className:`flex-1 p-4 rounded-lg border flex flex-col items-center gap-2 transition-all ${"light"===j?"border-primary bg-primary/10 text-primary":"border-border/20 text-muted-foreground hover:bg-card/50"}`,children:[(0,a.jsx)(x,{size:24})," ",(0,a.jsx)("span",{className:"text-sm font-medium",children:"Light"})]}),(0,a.jsxs)("button",{onClick:()=>k("dark"),className:`flex-1 p-4 rounded-lg border flex flex-col items-center gap-2 transition-all ${"dark"===j?"border-primary bg-primary/10 text-primary":"border-border/20 text-muted-foreground hover:bg-card/50"}`,children:[(0,a.jsx)(m,{size:24})," ",(0,a.jsx)("span",{className:"text-sm font-medium",children:"Dark"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-primary mb-2",children:[(0,a.jsx)(c,{size:24}),(0,a.jsx)("span",{className:"uppercase tracking-widest text-xs font-bold",children:"AI Configuration"})]}),(0,a.jsxs)("div",{className:"card glass p-8 rounded-xl border border-border/50 space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Your Gemini API Key"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:["Your personal API key for AI analysis. This key is used exclusively for your requests and is stored securely in your profile.",(0,a.jsx)("strong",{className:"text-primary",children:" No default keys are used."})]}),!A&&N?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center max-w-lg",children:[(0,a.jsxs)("div",{className:"flex-1 bg-background/50 border border-border/50 rounded-lg px-4 py-2 font-mono text-sm",children:["â€¢".repeat(32)," ",N.slice(-4)]}),(0,a.jsx)("button",{onClick:()=>P(!0),className:"btn btn-outline px-6 flex items-center gap-2",children:"Edit"})]}),(0,a.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400",children:"âœ“ API Key configured"})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex gap-2 max-w-lg",children:[(0,a.jsx)("input",{type:"password",value:N,onChange:e=>w(e.target.value),className:"flex-1 bg-background/50 border border-border/50 rounded-lg px-4 py-2 focus:border-primary focus:outline-none",placeholder:"Enter your Google Gemini API Key"}),(0,a.jsxs)("button",{onClick:E,className:"btn btn-primary px-6 flex items-center gap-2",children:[(0,a.jsx)(d.Save,{size:18})," Save"]})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Get a key from ",(0,a.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",className:"text-primary underline",children:"Google AI Studio"}),"."]})]})]}),(0,a.jsx)("div",{className:"border-t border-border/50"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Image Extractor API Key (Optional)"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:["Enhance product image imports by using the Image Extractor API.",(0,a.jsx)("a",{href:"https://extract.pics/api",target:"_blank",className:"text-primary underline ml-1",children:"Get a key here"}),"."]}),!S&&_?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center max-w-lg",children:[(0,a.jsxs)("div",{className:"flex-1 bg-background/50 border border-border/50 rounded-lg px-4 py-2 font-mono text-sm",children:["â€¢".repeat(32)," ",_.slice(-4)]}),(0,a.jsx)("button",{onClick:()=>C(!0),className:"btn btn-outline px-6 flex items-center gap-2",children:"Edit"})]}),(0,a.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400",children:"âœ“ Image Extractor Key configured"})]}):(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex gap-2 max-w-lg",children:[(0,a.jsx)("input",{type:"password",value:_,onChange:e=>I(e.target.value),className:"flex-1 bg-background/50 border border-border/50 rounded-lg px-4 py-2 focus:border-primary focus:outline-none",placeholder:"Enter your Image Extractor API Key"}),(0,a.jsxs)("button",{onClick:K,className:"btn btn-primary px-6 flex items-center gap-2",children:[(0,a.jsx)(d.Save,{size:18})," Save"]})]})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-red-400 mb-2 pt-6",children:[(0,a.jsx)(o,{size:24}),(0,a.jsx)("span",{className:"uppercase tracking-widest text-xs font-bold",children:"Danger Zone"})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("button",{onClick:T,className:"w-full max-w-lg p-4 rounded-lg border border-red-500/20 bg-red-500/5 flex items-center justify-center gap-2 text-red-400 hover:bg-red-500/10 transition-all",children:[(0,a.jsx)(n,{size:18})," Delete Account"]})})]}):null}e.s(["default",()=>b],13278)}]);